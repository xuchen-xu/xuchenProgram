{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\u6BD5\\u4E1A\\u8BBE\\u8BA1\\\\\\u5B9E\\u8DF5\\u8D44\\u6599\\\\20210201\\\\20210201\\\\code\\\\next-ts\\u6A21\\u677F\\\\my-app\\\\pages\\\\components\\\\lunbo.jsx\";\n\nvar style = require(\"./lunbo.less\");\n\nvar ReactDOM = require('react-dom');\n\nvar React = require('react');\n\nvar __jsx = React.createElement;\n\nvar data = require(\"../../static/data.json\");\n\nvar LunBoControl = React.createClass({\n  displayName: \"LunBoControl\",\n\n  /*对出入的props进行验证*/\n  propsTypes: {\n    defaultActiveIndex: React.PropTypes.number,\n    interval: React.PropTypes.number,\n    direction: React.PropTypes.oneOf[('right', 'left', 'top', 'bottom')],\n    number: React.PropTypes.number,\n    boxStyle: React.PropTypes.string,\n    imgWidth: React.PropTypes.number.isRequired,\n    imgHeight: React.PropTypes.number.isRequired\n  },\n\n  /*设置默认的props值*/\n  getDefaultProps: function getDefaultProps() {\n    return {\n      direction: 'right',\n      interval: 1000,\n      boxStyle: 'content'\n    };\n  },\n\n  /*初始化state值*/\n  getInitialState: function getInitialState() {\n    return {\n      activeIndex: 1,\n      offsetDistance: this.props.direction == 'right' || this.props.direction == 'left' ? -this.props.imgWidth : -this.props.imgHeight,\n      pause: false,\n      flag: true\n    };\n  },\n\n  /*生命周期函数 在首次渲染之前*/\n  componentWillMount: function componentWillMount() {\n    this.direction = this.props.direction === 'left' || this.props.direction === 'right' ? 'x' : 'y';\n  },\n\n  /*在真实的DOM被渲染出来后*/\n  componentDidMount: function componentDidMount() {\n    this.autoPlay();\n  },\n\n  /*组件被移除之前*/\n  componentWillUnmount: function componentWillUnmount() {\n    clearTimeout(this.timeOuter);\n    clearInterval(this.timer);\n  },\n  autoPlay: function autoPlay() {\n    switch (this.props.direction) {\n      case 'right':\n        this.timerOuter = setTimeout(this.playRight, this.props.interval);\n        this.direction = 'x';\n        break;\n\n      case 'left':\n        this.timerOuter = setTimeout(this.playLeft, this.props.interval);\n        this.direction = 'x';\n        break;\n\n      case 'top':\n        this.timerOuter = setTimeout(this.playLeft, this.props.interval);\n        this.direction = 'y';\n        break;\n\n      case 'bottom':\n        this.timerOuter = setTimeout(this.playRight, this.props.interval);\n        this.direction = 'y';\n        break;\n    }\n\n    ;\n  },\n\n  /*对不同方向做的相应模板上样式的处理*/\n  directionHandle: function directionHandle() {\n    if (this.direction === 'y') {\n      return {\n        top: this.state.offsetDistance + 'px',\n        width: this.props.imgWidth,\n        height: this.props.imgHeight * (this.props.number + 2)\n      };\n    } else {\n      return {\n        left: this.state.offsetDistance + 'px',\n        width: this.props.imgWidth * (this.props.number + 2),\n        height: this.props.imgHeight\n      };\n    }\n  },\n\n  /*鼠标滑入，滑出*/\n  mouseHandle: function mouseHandle(e) {\n    if (e.type === 'mouseover') {\n      this.setState({\n        pause: true\n      });\n    } else if (e.type === 'mouseleave') {\n      this.setState({\n        pause: false\n      });\n      this.autoPlay();\n    }\n  },\n\n  /*圆点显示效果*/\n  checkDots: function checkDots(index) {\n    var activeIndex;\n\n    if (this.state.activeIndex === this.props.number + 1) {\n      activeIndex = 1;\n    } else if (this.state.activeIndex === 0) {\n      activeIndex = this.props.number;\n    } else {\n      activeIndex = this.state.activeIndex;\n    }\n\n    return index + 1 === activeIndex ? 'dots active' : 'dots';\n  },\n\n  /*鼠标滑入圆点*/\n  dotsHover: function dotsHover(index) {\n    clearInterval(this.timer);\n    this.setState({\n      activeIndex: index + 1\n    });\n    this.position();\n  },\n\n  /*向右或向下*/\n  playRight: function playRight(indexIn) {\n    if (this.state.flag) {\n      var index = indexIn ? indexIn : this.state.activeIndex + 1;\n      this.setState({\n        activeIndex: index\n      });\n      this.position();\n    }\n  },\n\n  /*向左或向上*/\n  playLeft: function playLeft(indexIn) {\n    if (this.state.flag) {\n      var index = indexIn ? indexIn : this.state.activeIndex - 1;\n      this.setState({\n        activeIndex: index\n      });\n      this.position();\n    }\n  },\n\n  /*运动效果*/\n  position: function position() {\n    this.setState({\n      flag: false\n    });\n    this.timer = setInterval(function () {\n      if (this.direction === 'x') {\n        var boxDistance = this.props.imgWidth;\n      } else {\n        var boxDistance = this.props.imgHeight;\n      }\n\n      var offsetDistance = this.state.offsetDistance;\n\n      if (Math.abs(offsetDistance - -boxDistance * this.state.activeIndex) <= 0.09) {\n        offsetDistance = -boxDistance * this.state.activeIndex;\n        clearInterval(this.timer);\n        this.setState({\n          flag: true\n        });\n\n        if (this.state.activeIndex > this.props.number) {\n          offsetDistance = -boxDistance;\n          this.setState({\n            activeIndex: 1\n          });\n        } else if (this.state.activeIndex === 0) {\n          offsetDistance = -boxDistance * this.props.number;\n          this.setState({\n            activeIndex: this.props.number\n          });\n        }\n\n        this.setState({\n          offsetDistance: offsetDistance\n        });\n\n        if (!this.state.pause) {\n          this.autoPlay();\n        }\n      } else {\n        offsetDistance = offsetDistance - (boxDistance * this.state.activeIndex - Math.abs(offsetDistance)) / 30;\n        this.setState({\n          offsetDistance: offsetDistance\n        });\n      }\n    }.bind(this), 10);\n  },\n\n  /*点击向左按钮*/\n  left: function left() {\n    var oldIndex = this.state.activeIndex;\n    this.playLeft(oldIndex - 1);\n  },\n\n  /*点击向右按钮*/\n  right: function right() {\n    var oldIndex = this.state.activeIndex;\n    this.playRight(oldIndex + 1);\n  },\n  render: function render() {\n    var _this = this;\n\n    return __jsx(\"div\", {\n      className: this.props.boxStyle,\n      style: {\n        width: this.props.imgWidth,\n        height: this.props.imgHeight\n      },\n      onMouseOver: this.mouseHandle,\n      onMouseLeave: this.mouseHandle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, __jsx(\"span\", {\n      className: \"leftIcon\",\n      onClick: this.left,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }), __jsx(\"span\", {\n      className: \"rightIcon\",\n      onClick: this.right,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }), __jsx(\"div\", {\n      className: \"dots-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, React.Children.map(this.props.children, function (elem, index) {\n      return __jsx(\"span\", {\n        className: _this.checkDots(index),\n        onMouseOver: _this.dotsHover.bind(_this, index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 33\n        }\n      });\n    })), __jsx(\"ul\", {\n      style: this.directionHandle(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }\n    }, this.props.children[this.props.number - 1], this.props.children, this.props.children[0]));\n  }\n});\n_c = LunBoControl;\nvar LunBoComponent = React.createClass({\n  displayName: \"LunBoComponent\",\n  propsTypes: {\n    lunboObject: React.PropTypes.object.isRequired,\n    imgArray: React.PropTypes.array.isRequired,\n    linkArray: React.PropTypes.array\n  },\n  render: function render() {\n    return __jsx(LunBoControl, {\n      interval: this.props.lunboObject.interval,\n      number: this.props.lunboObject.number,\n      boxStyle: this.props.lunboObject.boxStyle,\n      imgWidth: this.props.lunboObject.imgWidth,\n      imgHeight: this.props.lunboObject.imgHeight,\n      direction: this.props.lunboObject.direction,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    }, this.props.imgArray.map(function (item, index) {\n      return __jsx(\"li\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 36\n        }\n      }, __jsx(\"a\", {\n        href: this.props.linkArray[index],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 52\n        }\n      }, __jsx(\"img\", {\n        width: this.props.lunboObject.imgWidth,\n        height: this.props.lunboObject.imgHeight,\n        src: item,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 90\n        }\n      })));\n    }.bind(this)));\n  }\n});\nmodule.exports = LunBoComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"LunBoControl\");","map":{"version":3,"sources":["D:/react毕业设计/实践资料/20210201/20210201/code/next-ts模板/my-app/pages/components/lunbo.jsx"],"names":["style","require","ReactDOM","React","data","LunBoControl","createClass","propsTypes","defaultActiveIndex","PropTypes","number","interval","direction","oneOf","boxStyle","string","imgWidth","isRequired","imgHeight","getDefaultProps","getInitialState","activeIndex","offsetDistance","props","pause","flag","componentWillMount","componentDidMount","autoPlay","componentWillUnmount","clearTimeout","timeOuter","clearInterval","timer","timerOuter","setTimeout","playRight","playLeft","directionHandle","top","state","width","height","left","mouseHandle","e","type","setState","checkDots","index","dotsHover","position","indexIn","setInterval","boxDistance","Math","abs","bind","oldIndex","right","render","_this","Children","map","children","elem","LunBoComponent","lunboObject","object","imgArray","array","linkArray","item","module","exports"],"mappings":"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","sourcesContent":["var style = require('./lunbo.less');\r\nvar ReactDOM = require('react-dom');\r\nvar React = require('react');\r\nvar data = require('../../static/data.json');\r\n\r\nvar LunBoControl = React.createClass({\r\n    /*对出入的props进行验证*/\r\n    propsTypes : {\r\n        defaultActiveIndex:React.PropTypes.number,\r\n        interval:React.PropTypes.number,\r\n        direction:React.PropTypes.oneOf['right','left','top','bottom'],\r\n        number:React.PropTypes.number,\r\n        boxStyle:React.PropTypes.string,\r\n        imgWidth:React.PropTypes.number.isRequired,\r\n        imgHeight:React.PropTypes.number.isRequired\r\n    },\r\n    /*设置默认的props值*/\r\n    getDefaultProps: function(){\r\n        return {\r\n            direction:'right',\r\n            interval: 1000,\r\n            boxStyle:'content'\r\n        };\r\n    },\r\n    /*初始化state值*/\r\n    getInitialState : function(){\r\n        return{\r\n            activeIndex:1,\r\n            offsetDistance:this.props.direction == 'right' || this.props.direction == 'left' ? -this.props.imgWidth : -this.props.imgHeight,\r\n            pause:false,\r\n            flag:true\r\n        };\r\n    },\r\n    /*生命周期函数 在首次渲染之前*/\r\n    componentWillMount : function(){\r\n        this.direction = this.props.direction === 'left' || this.props.direction === 'right'? 'x' : 'y';\r\n    },\r\n    /*在真实的DOM被渲染出来后*/\r\n    componentDidMount : function(){\r\n        this.autoPlay();\r\n    },\r\n    /*组件被移除之前*/\r\n    componentWillUnmount : function(){\r\n        clearTimeout(this.timeOuter);\r\n        clearInterval(this.timer);\r\n    },\r\n    autoPlay : function(){\r\n        switch(this.props.direction){\r\n        case 'right' : \r\n            this.timerOuter=setTimeout(this.playRight,this.props.interval);\r\n            this.direction='x';\r\n            break;\r\n        case 'left'  : \r\n            this.timerOuter=setTimeout(this.playLeft,this.props.interval);\r\n            this.direction='x';\r\n            break;\r\n        case 'top'   : \r\n            this.timerOuter=setTimeout(this.playLeft,this.props.interval);\r\n            this.direction='y';\r\n            break;\r\n        case 'bottom': \r\n            this.timerOuter=setTimeout(this.playRight,this.props.interval);\r\n            this.direction='y';\r\n            break;\r\n        };\r\n    },\r\n    /*对不同方向做的相应模板上样式的处理*/\r\n    directionHandle : function(){\r\n        if(this.direction === 'y'){\r\n            return {top : this.state.offsetDistance+'px',width : this.props.imgWidth,height : this.props.imgHeight*(this.props.number+2)};\r\n        }else {\r\n            return {left : this.state.offsetDistance+'px',width : this.props.imgWidth*(this.props.number+2),height : this.props.imgHeight};\r\n        }\r\n    },\r\n    /*鼠标滑入，滑出*/\r\n    mouseHandle : function(e){\r\n        if(e.type === 'mouseover'){\r\n            this.setState({pause : true});\r\n        }else if(e.type === 'mouseleave'){\r\n            this.setState({pause : false});\r\n            this.autoPlay();\r\n        }\r\n    },\r\n    /*圆点显示效果*/\r\n    checkDots : function(index){\r\n        var activeIndex;\r\n        if(this.state.activeIndex === this.props.number+1){\r\n            activeIndex = 1;\r\n        }else if(this.state.activeIndex === 0){\r\n            activeIndex = this.props.number;\r\n        }else {\r\n            activeIndex = this.state.activeIndex;\r\n        }\r\n        return index+1 === activeIndex? 'dots active' : 'dots';\r\n    },\r\n    /*鼠标滑入圆点*/\r\n    dotsHover : function(index){\r\n        clearInterval(this.timer);\r\n        this.setState({activeIndex:index+1});\r\n        this.position();\r\n    },\r\n    /*向右或向下*/\r\n    playRight: function(indexIn){\r\n        if(this.state.flag){\r\n            var index=indexIn?indexIn:this.state.activeIndex+1;\r\n            this.setState({activeIndex:index});\r\n            this.position();\r\n        }\r\n    },\r\n    /*向左或向上*/\r\n    playLeft: function(indexIn){\r\n        if(this.state.flag){\r\n            var index=indexIn?indexIn:this.state.activeIndex-1;\r\n            this.setState({activeIndex:index});\r\n            this.position();\r\n        }\r\n    },\r\n    /*运动效果*/\r\n    position: function(){\r\n        this.setState({flag:false});\r\n        this.timer = setInterval(function(){\r\n            if(this.direction === 'x'){\r\n                var boxDistance = this.props.imgWidth;\r\n            }else {\r\n                var boxDistance = this.props.imgHeight;\r\n            }\r\n            var offsetDistance = this.state.offsetDistance;\r\n            if(Math.abs(offsetDistance-(-boxDistance*this.state.activeIndex)) <= 0.09){\r\n                offsetDistance = -boxDistance*this.state.activeIndex;\r\n                clearInterval(this.timer);\r\n                this.setState({flag:true});\r\n                if(this.state.activeIndex > this.props.number){\r\n                    offsetDistance = -boxDistance;\r\n                    this.setState({activeIndex : 1});\r\n                }else if(this.state.activeIndex === 0){\r\n                    offsetDistance = -boxDistance*this.props.number;\r\n                    this.setState({activeIndex : this.props.number});\r\n                }\r\n                this.setState({offsetDistance:offsetDistance});\r\n                if(!this.state.pause){\r\n                    this.autoPlay();\r\n                }\r\n            }else{\r\n                offsetDistance = offsetDistance-(boxDistance*this.state.activeIndex-Math.abs(offsetDistance))/30;\r\n                this.setState({offsetDistance:offsetDistance});\r\n            }\r\n        }.bind(this),10);\r\n    },\r\n    /*点击向左按钮*/\r\n    left: function(){\r\n        var oldIndex=this.state.activeIndex;\r\n        this.playLeft(oldIndex-1);\r\n    },\r\n    /*点击向右按钮*/\r\n    right: function(){\r\n        var oldIndex=this.state.activeIndex;\r\n        this.playRight(oldIndex+1);\r\n    },\r\n    render : function(){\r\n        var _this = this;\r\n        return (<div className={this.props.boxStyle} style={{width:this.props.imgWidth, height:this.props.imgHeight}} onMouseOver={this.mouseHandle} onMouseLeave={this.mouseHandle}>\r\n            <span className=\"leftIcon\" onClick={this.left}></span>\r\n            <span className=\"rightIcon\" onClick={this.right}></span>\r\n            <div className=\"dots-wrap\">\r\n                {   \r\n                    React.Children.map(this.props.children,function(elem,index){\r\n                        return (<span className={_this.checkDots(index)} onMouseOver={_this.dotsHover.bind(_this,index)}></span>);\r\n                    })\r\n                }\r\n            </div>\r\n            <ul style={this.directionHandle()}>\r\n                {this.props.children[this.props.number-1]}\r\n                {this.props.children}\r\n                {this.props.children[0]}\r\n            </ul>\r\n        </div>);\r\n    }\r\n});\r\nvar LunBoComponent = React.createClass({\r\n    propsTypes : {\r\n        lunboObject : React.PropTypes.object.isRequired,\r\n        imgArray : React.PropTypes.array.isRequired,\r\n        linkArray : React.PropTypes.array\r\n    },\r\n    render : function(){\r\n        return (\r\n                <LunBoControl interval={this.props.lunboObject.interval} number={this.props.lunboObject.number} boxStyle={this.props.lunboObject.boxStyle} imgWidth={this.props.lunboObject.imgWidth} imgHeight={this.props.lunboObject.imgHeight} direction={this.props.lunboObject.direction}>\r\n                    {    \r\n                        this.props.imgArray.map(function(item,index){\r\n                            return <li key={index}><a href={this.props.linkArray[index]}><img width={this.props.lunboObject.imgWidth} height={this.props.lunboObject.imgHeight} src={item}/></a></li>;\r\n                        }.bind(this))\r\n                    }\r\n                </LunBoControl>\r\n        );\r\n    }\r\n});\r\nmodule.exports = LunBoComponent;\r\n"]},"metadata":{},"sourceType":"script"}